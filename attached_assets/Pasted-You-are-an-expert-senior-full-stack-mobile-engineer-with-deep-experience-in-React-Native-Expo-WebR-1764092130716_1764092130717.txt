You are an expert senior full-stack mobile engineer with deep experience in React Native, Expo, WebRTC, secure messaging, backend architecture, auth systems, and minimalistic UI design.

Your task:  
**Create a complete, production-ready React Native + Expo project of a secure mobile messenger app**, with the following features and requirements.

I am NOT a programmer. Build everything cleanly, clearly, with full explanations, comments, structure, and working code.

===========================================
### 1. PLATFORM & TECHNOLOGY REQUIREMENTS
===========================================

- Use **React Native + Expo** (managed workflow, not bare).
- The app must run on **iOS and Android**.
- Use **TypeScript**.
- Use **minimalistic light-design UI** (white, light-gray, pastel tones, few accents, clean typography).
- Use **Expo Router** for navigation.
- Use **secure backend** created in the same Replit project:
  - Use Node.js + Express or Fastify.
  - Use a database (SQLite or Supabase or MongoDB — choose what fits best).
  - Use WebSocket (or Socket.IO) for realtime messaging + signaling.
  - Use JWT-based authentication.
  - Use bcrypt for secure password hashing.
- All screens, flows, and components must be implemented by you.

===========================================
### 2. AUTHENTICATION SYSTEM
===========================================

Users must be able to register and log in using:

- **Email**
- **Password**
- **Invite code**

Invite codes:
- Generated by the backend.
- Stored in the database.
- Can be created by an admin OR by any existing user (selectable at config time).
- One invite code may allow:
  - Either 1 registration (single-use)
  - Or unlimited registrations (depending on backend config)
- During registration:
  - User enters: email, password, username, invite code.
  - Backend validates invite code.
  - If valid → create user.
  - If invalid → reject with a readable error.

User fields:
- email
- passwordHash
- username (unique @nickname)
- createdAt
- updatedAt

===========================================
### 3. GLOBAL FUNCTIONALITY OF THE APP
===========================================

This is a **full messenger**, not a demo.

Core modules:

1. **Private chats (1-to-1 messaging)**
   - Text messages
   - Read receipts
   - Online/offline indicators
   - Realtime updates via WebSocket
   - Message storage in DB

2. **User search system**
   - Search by username (e.g. “@roman”, “@andrew”)
   - Search results must show:
     - avatar placeholder
     - username
     - “Написать сообщение” button

3. **Group chats**
   - Up to **30 participants**
   - Group creation screen
   - Invite users by searching their usernames
   - Group settings:
     - Title
     - Description (optional)
     - List of participants
     - Leave group
   - Realtime messaging for groups
   - Admin rights NOT required. All users are equal.

4. **1-to-1 audio calls**
   - WebRTC peer-to-peer
   - Built-in mic/camera permissions
   - Call screen with:
     - mute/unmute
     - end call
     - call timer

5. **1-to-1 video calls**
   - WebRTC video stream
   - Remote and local preview
   - Switch camera
   - Mute mic
   - Turn off video

6. **Rooms for group calls**
   - Zoom-like **rooms** with up to **10 participants**
   - Video + audio
   - Grid layout for participants
   - WebRTC multi-peer connection (mesh)
   - UI:
     - join room
     - leave room
     - toggle video/mic
     - see participants list
   - Room authentication:
     - Only registered users can join rooms.

7. **Security**
   - HTTPS on backend
   - JWT tokens for API & sockets
   - Store passwords hashed (bcrypt)
   - WebRTC uses built-in DTLS/SRTP
   - Messages stored in DB
   - Server never logs plaintext passwords
   - Token refresh logic

===========================================
### 4. UI/UX DESIGN REQUIREMENTS
===========================================

Minimalistic modern light theme.

Colors:
- #FFFFFF
- #F5F5F5
- #EDEDED
- #DADADA
- #A8A8A8
- #1A1A1A for text
- #4B61FF as a single accent color

Typography:
- Use simple, clean typography.
- No complex gradients, no shadows, no flashy elements.

Screens:

1. **Auth screens**
   - Light background
   - Inputs with rounded corners
   - Simple “Регистрация” and “Войти” screens
   - Fields:
     - Email
     - Password
     - Username
     - Invite code

2. **Main tabs**
   - Чаты
   - Поиск
   - Настройки

3. **Chat screen**
   - Minimal message bubbles (light gray / accent for own messages)
   - Timestamp small
   - Input bar fixed at bottom

4. **Group chat**
   - Same UI as private chat, but with header showing group name

5. **Call UI**
   - Big video area
   - Simple buttons at bottom:
     - end
     - mic toggle
     - video toggle

6. **Room UI (до 10 участников)**
   - Adaptive grid for video tiles
   - Name label for each participant
   - Controls bar

===========================================
### 5. BACKEND REQUIREMENTS
===========================================

Backend must include:

1. **Auth routes**
   - POST /auth/register
   - POST /auth/login
   - POST /auth/refresh
   - Validate invite codes
   - Hash passwords

2. **Messaging**
   - Private chat API
   - Group chat API
   - WebSocket events:
     - join_room
     - leave_room
     - message
     - typing
     - read_receipt

3. **Groups**
   - Create group
   - Add users
   - Remove users
   - Fetch group info & participants

4. **Search**
   - GET /search?username=...

5. **Calls**
   - Signaling server for WebRTC:
     - offer
     - answer
     - ice-candidate
     - end-call

6. **Rooms (group calls)**
   - Signaling rooms
   - Track participants
   - Handle join/leave events

7. **Database**
   - Users
   - Invite codes
   - Private messages
   - Group messages
   - Groups
   - Group participants

===========================================
### 6. CODE ORGANIZATION
===========================================

Produce a clean, professional file structure:

- app/
  - screens/
  - components/
  - hooks/
  - context/
  - services/
  - styles/
- backend/
  - server.js
  - routes/
  - controllers/
  - models/
  - websocket/
- shared/
  - types/
  - utils/

===========================================
### 7. DELIVERABLES
===========================================

You must output:

- Full Expo project
- Full backend server code
- All API routes
- WebRTC setup
- Realtime messaging
- Rooms logic
- Secure auth
- Invite system
- Minimalistic UI
- Thorough comments
- Clear README explaining:
  - how to run backend
  - how to run Expo project
  - how to test messaging
  - how to test calls
  - how to test group rooms

===========================================
### 8. START BUILDING NOW
===========================================

Start by generating the folder structure, initializing Expo app, initializing backend, and then implement features step by step.

Build EVERYTHING according to this specification.

